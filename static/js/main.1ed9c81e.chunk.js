(this["webpackJsonp@fdograph/ridiculously-over-engineered-calculator"]=this["webpackJsonp@fdograph/ridiculously-over-engineered-calculator"]||[]).push([[0],{11:function(t,e,n){t.exports=n(19)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var r,u,a=n(0),i=n.n(a),c=n(8),o=n.n(c),s=n(10),l=n(3),p=n(4),O=n(6),A=n(5),T=n(2);!function(t){t.NOOP="CALCULATOR/FORMULA/NOOP",t.SUM="CALCULATOR/FORMULA/SUM",t.SUBTRACT="CALCULATOR/FORMULA/SUBTRACT",t.MULTIPLY="CALCULATOR/FORMULA/MULTIPLY",t.DIVIDE="CALCULATOR/FORMULA/DIVIDE"}(r||(r={})),function(t){t.PLUSMINUS="CALCULATOR/FORMULA/PLUSMINUS",t.PERCENT="CALCULATOR/FORMULA/PERCENT"}(u||(u={}));var f,R=function(t){Object(O.a)(n,t);var e=Object(A.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,t)}return Object(p.a)(n,[{key:"perform",value:function(t){var e,n,u=this.get("base");switch(this.get("type")){case r.SUM:return this.set("result",(e=u,n=t,e+n)).set("input",t);case r.SUBTRACT:return this.set("result",function(t,e){return t-e}(u,t)).set("input",t);case r.MULTIPLY:return this.set("result",function(t,e){return t*e}(u,t)).set("input",t);case r.DIVIDE:return this.set("result",function(t,e){return t/e}(u,t)).set("input",t);case r.NOOP:return this.set("result",this.get("base")).set("input",t);default:throw new Error("Unknown operation")}}}]),n}(Object(T.b)({input:void 0,base:0,type:r.NOOP,result:void 0}));!function(t){t[t.OPERATION=0]="OPERATION",t[t.TRANSFORMATION=1]="TRANSFORMATION",t[t.INPUT=2]="INPUT"}(f||(f={}));var I,N=function(t){Object(O.a)(n,t);var e=Object(A.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"getLastValue",value:function(){var t=this.get("safeInput"),e=this.get("currentOperation"),n=this.get("operations").last(null);return null!==t?t:e?e.get("base"):n?n.get("result",0):0}},{key:"getLastResult",value:function(){return this.get("operations").last().get("result",0)}},{key:"parseInput",value:function(){return this.set("safeInput",Number(this.get("rawInput").join("")))}},{key:"outputRaw",value:function(){return this.set("output",this.get("rawInput").join(""))}},{key:"outputSafe",value:function(){return this.set("output",this.get("safeInput",0).toString())}},{key:"outputLastResult",value:function(){return this.set("output",this.getLastResult().toString())}},{key:"pushOperation",value:function(t){return this.update("operations",(function(e){return e.push(t)}))}},{key:"reApplyPrevOp",value:function(){var t=this.get("operations").last();if(void 0===t)return this.outputSafe();var e=this.get("safeInput"),n=null===e?t.get("result",0):t.get("input",0),r=null===e?t.get("input",0):e,u=t.set("base",n).perform(r);return this.pushOperation(u).clearInput().outputLastResult()}},{key:"applyCurrentOp",value:function(){var t=this.get("currentOperation"),e=this.get("safeInput",0);if(!t)throw new Error("There is no open Operation");return this.pushOperation(t.perform(e)).delete("currentOperation").clearInput().outputLastResult()}},{key:"closeAndOpenOp",value:function(t,e){var n=this.get("lastActionType"),r=this.get("currentOperation");if(!r)throw new Error("There is no open Operation");if(n===f.OPERATION||n===f.TRANSFORMATION)return this.set("currentOperation",r.set("type",e));var u=r.perform(t);return this.pushOperation(u).set("currentOperation",new R({base:u.get("result"),type:e}))}},{key:"updateInput",value:function(t){if(!t.length||!/[\d.]/.test(t))throw new Error("Illegal input character: ".concat(t));return/[.]/.test(t)&&this.get("rawInput").includes(".")&&(t=t.replace(".","")),this.update("rawInput",(function(e){return e.concat(t.split(""))})).parseInput().set("lastActionType",f.INPUT).outputRaw()}},{key:"applyTransform",value:function(t){var e,n=this.get("currentOperation"),r=this.getLastValue(),a=n?n.get("base"):r;switch(t){case u.PLUSMINUS:return this.set("safeInput",(e=r,-1*e)).set("lastActionType",f.TRANSFORMATION).outputSafe();case u.PERCENT:return this.set("safeInput",function(t,e){return t*e/100}(a,r)).set("lastActionType",f.TRANSFORMATION);default:throw new Error("Unknown transformation")}}},{key:"addOperation",value:function(t){var e=this.get("currentOperation"),n=this.getLastValue();return e?this.closeAndOpenOp(n,t).clearInput().set("lastActionType",f.OPERATION):this.set("currentOperation",new R({base:n,type:t})).clearInput().set("lastActionType",f.OPERATION)}},{key:"calculateResult",value:function(){return this.get("currentOperation")?this.applyCurrentOp():this.reApplyPrevOp()}},{key:"clearInput",value:function(){return this.delete("safeInput").delete("rawInput")}}]),n}(Object(T.b)({lastActionType:null,operations:Object(T.a)(),currentOperation:null,rawInput:Object(T.a)(),safeInput:null,output:"0"})),L=n(1);!function(t){t.ADD_OPERATION="CALCULATOR/ACTION/ADD_OPERATION",t.APPLY_TRANSFORM="CALCULATOR/ACTION/APPLY_TRANSFORM",t.UPDATE_INPUT="CALCULATOR/ACTION/UPDATE_INPUT",t.CLEAR_ALL="CALCULATOR/ACTION/CLEAR_ALL",t.CALCULATE="CALCULATOR/ACTION/CALCULATE"}(I||(I={}));var C,E=Object(L.createAction)(I.ADD_OPERATION)(),h=Object(L.createAction)(I.UPDATE_INPUT)(),U=Object(L.createAction)(I.CLEAR_ALL)(),y=Object(L.createAction)(I.CALCULATE)(),P=Object(L.createAction)(I.APPLY_TRANSFORM)(),k=Object(L.createReducer)(new N).handleType(I.ADD_OPERATION,(function(t,e){return t.addOperation(e.payload)})).handleType(I.UPDATE_INPUT,(function(t,e){return t.updateInput(e.payload)})).handleType(I.CLEAR_ALL,(function(t){return t.clear()})).handleType(I.APPLY_TRANSFORM,(function(t,e){return t.applyTransform(e.payload)})).handleType(I.CALCULATE,(function(t){return t.calculateResult()})),d=n(9),v=n.n(d);!function(t){t.TRANSFORM="CALCULATOR/KEY/TRANSFORM",t.OPERATION="CALCULATOR/KEY/OPERATION",t.INPUT="CALCULATOR/KEY/INPUT"}(C||(C={}));var m=function(t){var e=t.type,n=t.text,r=t.onClick,u=t.className;return i.a.createElement("button",{className:v()(u,{key:!0,"key--transform":e===C.TRANSFORM,"key--operation":e===C.OPERATION,"key--input":e===C.INPUT}),onClick:r},n)},g=(n(16),function(){var t=Object(a.useReducer)(k,new N),e=Object(s.a)(t,2),n=e[0],c=e[1];return i.a.createElement("div",{className:"calculator"},i.a.createElement("div",{className:"screen"},n.get("output")),i.a.createElement("div",{className:"keyboard"},i.a.createElement(m,{onClick:function(){return c(U())},type:C.TRANSFORM,text:"C"}),i.a.createElement(m,{onClick:function(){return c(P(u.PLUSMINUS))},type:C.TRANSFORM,text:"+/-"}),i.a.createElement(m,{onClick:function(){return c(P(u.PERCENT))},type:C.TRANSFORM,text:"%"}),i.a.createElement(m,{onClick:function(){return c(E(r.DIVIDE))},type:C.OPERATION,text:"/"}),i.a.createElement(m,{onClick:function(){return c(h("7"))},type:C.INPUT,text:"7"}),i.a.createElement(m,{onClick:function(){return c(h("8"))},type:C.INPUT,text:"8"}),i.a.createElement(m,{onClick:function(){return c(h("9"))},type:C.INPUT,text:"9"}),i.a.createElement(m,{onClick:function(){return c(E(r.MULTIPLY))},type:C.OPERATION,text:"X"}),i.a.createElement(m,{onClick:function(){return c(h("4"))},type:C.INPUT,text:"4"}),i.a.createElement(m,{onClick:function(){return c(h("5"))},type:C.INPUT,text:"5"}),i.a.createElement(m,{onClick:function(){return c(h("6"))},type:C.INPUT,text:"6"}),i.a.createElement(m,{onClick:function(){return c(E(r.SUBTRACT))},type:C.OPERATION,text:"-"}),i.a.createElement(m,{onClick:function(){return c(h("1"))},type:C.INPUT,text:"1"}),i.a.createElement(m,{onClick:function(){return c(h("2"))},type:C.INPUT,text:"2"}),i.a.createElement(m,{onClick:function(){return c(h("3"))},type:C.INPUT,text:"3"}),i.a.createElement(m,{onClick:function(){return c(E(r.SUM))},type:C.OPERATION,text:"+"}),i.a.createElement(m,{className:"key--zero",onClick:function(){return c(h("0"))},type:C.INPUT,text:"0"}),i.a.createElement(m,{onClick:function(){return c(h("."))},type:C.INPUT,text:"."}),i.a.createElement(m,{onClick:function(){return c(y())},type:C.OPERATION,text:"="})))}),S=(n(17),function(){return i.a.createElement("div",{id:"calc-container"},i.a.createElement(g,null))});n(18);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(S,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.1ed9c81e.chunk.js.map