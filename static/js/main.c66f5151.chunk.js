(this["webpackJsonp@fdograph/ridiculously-over-engineered-calculator"]=this["webpackJsonp@fdograph/ridiculously-over-engineered-calculator"]||[]).push([[0],{11:function(t,e,n){t.exports=n(19)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var r,u,a=n(0),c=n.n(a),i=n(8),o=n.n(i),s=n(10),l=n(3),p=n(4),O=n(6),A=n(5),T=n(2);!function(t){t.NOOP="CALCULATOR/FORMULA/NOOP",t.SUM="CALCULATOR/FORMULA/SUM",t.SUBTRACT="CALCULATOR/FORMULA/SUBTRACT",t.MULTIPLY="CALCULATOR/FORMULA/MULTIPLY",t.DIVIDE="CALCULATOR/FORMULA/DIVIDE"}(r||(r={})),function(t){t.PLUSMINUS="CALCULATOR/FORMULA/PLUSMINUS",t.PERCENT="CALCULATOR/FORMULA/PERCENT"}(u||(u={}));var f,L=function(t){Object(O.a)(n,t);var e=Object(A.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,t)}return Object(p.a)(n,[{key:"perform",value:function(t){var e,n,u=this.get("base");switch(this.get("type")){case r.SUM:return this.set("result",(e=u,n=t,e+n)).set("input",t);case r.SUBTRACT:return this.set("result",function(t,e){return t-e}(u,t)).set("input",t);case r.MULTIPLY:return this.set("result",function(t,e){return t*e}(u,t)).set("input",t);case r.DIVIDE:return this.set("result",function(t,e){return t/e}(u,t)).set("input",t);case r.NOOP:return this.set("result",this.get("base")).set("input",t);default:throw new Error("Unknown operation")}}}]),n}(Object(T.b)({input:void 0,base:0,type:r.NOOP,result:void 0})),R=function(t){Object(O.a)(n,t);var e=Object(A.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"getLastRelevantBase",value:function(){var t=this.get("safeInput"),e=this.get("currentOperation"),n=this.get("operations").last(null);return null!==t?t:e?e.get("base"):n?n.get("result"):0}},{key:"getLastResult",value:function(){return this.get("operations").last().get("result",0)}},{key:"parseInput",value:function(){return this.set("safeInput",Number(this.get("rawInput").join("")))}},{key:"outputRaw",value:function(){return this.set("output",this.get("rawInput").join(""))}},{key:"outputSafe",value:function(){return this.set("output",this.get("safeInput",0).toString())}},{key:"outputLastResult",value:function(){return this.set("output",this.getLastResult().toString())}},{key:"pushOperation",value:function(t){return this.update("operations",(function(e){return e.push(t)}))}},{key:"reApplyPrevOp",value:function(){var t=this.get("operations").last();if(void 0===t)return this.outputSafe();var e=this.get("safeInput"),n=null===e?t.get("result",0):t.get("input",0),r=null===e?t.get("input",0):e,u=t.set("base",n).perform(r);return this.pushOperation(u).clearInput().outputLastResult()}},{key:"applyCurrentOp",value:function(){var t=this.get("currentOperation"),e=this.get("safeInput",0);if(!t)throw new Error("There is no open Operation");return this.pushOperation(t.perform(e)).delete("currentOperation").clearInput().outputLastResult()}},{key:"closeAndOpenOp",value:function(t,e){var n=this.get("currentOperation");if(!n)throw new Error("There is no open Operation");var r=n.perform(t);return this.pushOperation(r).set("currentOperation",new L({base:r.get("result"),type:e}))}},{key:"updateInput",value:function(t){if(!t.length||!/[\d.]/.test(t))throw new Error("Illegal input character: ".concat(t));return/[.]/.test(t)&&this.get("rawInput").includes(".")&&(t=t.replace(".","")),this.update("rawInput",(function(e){return e.concat(t.split(""))})).parseInput().outputRaw()}},{key:"applyTransform",value:function(t){var e,n=this.get("currentOperation"),r=this.getLastRelevantBase(),a=n?n.get("base"):r;switch(t){case u.PLUSMINUS:return this.set("safeInput",(e=r,-1*e)).outputSafe();case u.PERCENT:return this.set("safeInput",function(t,e){return t*e/100}(a,r));default:throw new Error("Unknown transformation")}}},{key:"addOperation",value:function(t){var e=this.get("currentOperation"),n=this.getLastRelevantBase();return e?this.closeAndOpenOp(n,t).clearInput():this.set("currentOperation",new L({base:n,type:t})).clearInput()}},{key:"calculateResult",value:function(){return this.get("currentOperation")?this.applyCurrentOp():this.reApplyPrevOp()}},{key:"clearInput",value:function(){return this.delete("safeInput").delete("rawInput")}}]),n}(Object(T.b)({operations:Object(T.a)(),currentOperation:null,rawInput:Object(T.a)(),safeInput:null,output:"0"})),C=n(1);!function(t){t.ADD_OPERATION="CALCULATOR/ACTION/ADD_OPERATION",t.APPLY_TRANSFORM="CALCULATOR/ACTION/APPLY_TRANSFORM",t.UPDATE_INPUT="CALCULATOR/ACTION/UPDATE_INPUT",t.CLEAR_ALL="CALCULATOR/ACTION/CLEAR_ALL",t.CALCULATE="CALCULATOR/ACTION/CALCULATE"}(f||(f={}));var I,h=Object(C.createAction)(f.ADD_OPERATION)(),E=Object(C.createAction)(f.UPDATE_INPUT)(),U=Object(C.createAction)(f.CLEAR_ALL)(),y=Object(C.createAction)(f.CALCULATE)(),N=Object(C.createAction)(f.APPLY_TRANSFORM)(),P=Object(C.createReducer)(new R).handleType(f.ADD_OPERATION,(function(t,e){return t.addOperation(e.payload)})).handleType(f.UPDATE_INPUT,(function(t,e){return t.updateInput(e.payload)})).handleType(f.CLEAR_ALL,(function(t){return t.clear()})).handleType(f.APPLY_TRANSFORM,(function(t,e){return t.applyTransform(e.payload)})).handleType(f.CALCULATE,(function(t){return t.calculateResult()})),k=n(9),v=n.n(k);!function(t){t.TRANSFORM="CALCULATOR/KEY/TRANSFORM",t.OPERATION="CALCULATOR/KEY/OPERATION",t.INPUT="CALCULATOR/KEY/INPUT"}(I||(I={}));var d=function(t){var e=t.type,n=t.text,r=t.onClick,u=t.className;return c.a.createElement("button",{className:v()(u,{key:!0,"key--transform":e===I.TRANSFORM,"key--operation":e===I.OPERATION,"key--input":e===I.INPUT}),onClick:r},n)},m=(n(16),function(){var t=Object(a.useReducer)(P,new R),e=Object(s.a)(t,2),n=e[0],i=e[1];return c.a.createElement("div",{className:"calculator"},c.a.createElement("div",{className:"screen"},n.get("output")),c.a.createElement("div",{className:"keyboard"},c.a.createElement(d,{onClick:function(){return i(U())},type:I.TRANSFORM,text:"C"}),c.a.createElement(d,{onClick:function(){return i(N(u.PLUSMINUS))},type:I.TRANSFORM,text:"+/-"}),c.a.createElement(d,{onClick:function(){return i(N(u.PERCENT))},type:I.TRANSFORM,text:"%"}),c.a.createElement(d,{onClick:function(){return i(h(r.DIVIDE))},type:I.OPERATION,text:"/"}),c.a.createElement(d,{onClick:function(){return i(E("7"))},type:I.INPUT,text:"7"}),c.a.createElement(d,{onClick:function(){return i(E("8"))},type:I.INPUT,text:"8"}),c.a.createElement(d,{onClick:function(){return i(E("9"))},type:I.INPUT,text:"9"}),c.a.createElement(d,{onClick:function(){return i(h(r.MULTIPLY))},type:I.OPERATION,text:"X"}),c.a.createElement(d,{onClick:function(){return i(E("4"))},type:I.INPUT,text:"4"}),c.a.createElement(d,{onClick:function(){return i(E("5"))},type:I.INPUT,text:"5"}),c.a.createElement(d,{onClick:function(){return i(E("6"))},type:I.INPUT,text:"6"}),c.a.createElement(d,{onClick:function(){return i(h(r.SUBTRACT))},type:I.OPERATION,text:"-"}),c.a.createElement(d,{onClick:function(){return i(E("1"))},type:I.INPUT,text:"1"}),c.a.createElement(d,{onClick:function(){return i(E("2"))},type:I.INPUT,text:"2"}),c.a.createElement(d,{onClick:function(){return i(E("3"))},type:I.INPUT,text:"3"}),c.a.createElement(d,{onClick:function(){return i(h(r.SUM))},type:I.OPERATION,text:"+"}),c.a.createElement(d,{className:"key--zero",onClick:function(){return i(E("0"))},type:I.INPUT,text:"0"}),c.a.createElement(d,{onClick:function(){return i(E("."))},type:I.INPUT,text:"."}),c.a.createElement(d,{onClick:function(){return i(y())},type:I.OPERATION,text:"="})))}),g=(n(17),function(){return c.a.createElement("div",{id:"calc-container"},c.a.createElement(m,null))});n(18);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.c66f5151.chunk.js.map